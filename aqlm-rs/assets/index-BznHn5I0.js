(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();let o=[],l=!1;function c(){return window.location.hash==="#llama-3"?{prefix:"https://huggingface.co/galqiwi/llama-3.2-3b-aqlm-pv-2x8-f32-int8-and-nf4-emb/resolve/main/",suffix:"?download=true"}:window.location.hash==="#llama-8"?{prefix:"https://huggingface.co/galqiwi/llama-3.1-aqlm-pv-2x8-f32-int8-and-nf4-emb/resolve/main/",suffix:"?download=true"}:{prefix:"https://huggingface.co/galqiwi/llama-3.2-1b-aqlm-pv-2x8-f32-int8-and-nf4-emb/resolve/main/",suffix:"?download=true"}}function h(){return window.location.hash==="#llama-3"?"Llama-3.2-3B":window.location.hash==="#llama-8"?"Llama-3.1-8B":"Llama-3.2-1B"}function f(){try{new WebAssembly.Memory({initial:256*64*3,maximum:256*64*3})}catch{return!1}return!0}const u=f();u||(document.getElementById("user-input").placeholder="Not enough RAM");function g(n,t){const a=document.getElementById("chat"),i=document.createElement("div");i.classList.add(t==="User"?"user-message-row":"ai-message-row");const e=document.createElement("span");e.classList.add("message"),e.textContent=n,i.appendChild(e),a.appendChild(i)}function m(n){const t=document.getElementById("chat");for(;t.firstChild;)t.removeChild(t.lastChild);n.forEach(a=>{g(a.content,a.role)})}const d=new Worker(new URL("/aqlm-rs/assets/worker-RSJ2Wdsj.js",import.meta.url));document.getElementById("user-input-form").addEventListener("submit",function(n){if(n.preventDefault(),l)return;let t=document.getElementById("user-input").value;if(document.getElementById("user-input").value="",t==="")return;o.push({role:"User",content:t});function a(){m(o),l=!0,document.getElementById("user-input-button").classList.add("inactive-button"),document.getElementById("clear-button").classList.add("inactive-button"),document.getElementById("chat-title").classList.add("chat-title-hidden"),document.getElementById("user-input-width-limiter").classList.remove("user-input-width-limiter-active"),document.getElementById("user-input-height-limiter").classList.remove("user-input-height-limiter-active"),document.getElementById("chat").classList.remove("chat-hidden"),document.getElementById("chat").classList.add("chat-visible"),document.getElementById("chat-model-header").classList.remove("chat-model-header-hidden"),document.getElementById("chat-model-header").innerText="Chat with "+h()}if(!u){o.push({role:"Assistant",content:"Not enough RAM. Only devices with available 3GB of RAM are supported."}),a();return}a(),d.postMessage({messages:o,load_scheme:c()})});document.getElementById("clear-button").addEventListener("click",function(n){d.postMessage({messages:[],load_scheme:c()})});d.onmessage=n=>{document.getElementById("clear-button").classList.remove("clear-button-hidden"),o=n.data.messages,m(o),n.data.is_finished&&(l=!1,document.getElementById("user-input-button").classList.remove("inactive-button"),document.getElementById("clear-button").classList.remove("inactive-button"))};
